# 第一章 HTTP基本概念

## 一、什么是HTTP

**HTTP是干嘛用的？**

HTTP学名叫做**超文本传输协议，**是一个网络协议。

是专门用来帮你传输诸如 HTML 的超媒体文档等 Web 内容滴。因为 HTML 本身就是超文本可扩展语言，HTML 中不仅有文本还有图片、音视频等内容，所以用来传输它的协议当然就叫超文本传输协议了。

关于这个协议，就算你不了解，至少也听说过吧？比如你访问俺的博客的主页，浏览器地址栏会出现如下的网址：[**http**://dunizb.com/](https://dunizb.com/)，俺加了粗体的部分就是指 HTTP 协议。大部分网站都是通过 HTTP 协议来传输 Web 页面、以及 Web 页面上包含的各种东东（图片、CSS 样式、JS 脚本）。

它基于 TCP/IP 的应用层协议。它被设计用于Web浏览器和Web服务器之间的通信，但它也可以用于其他目的。

它是 Web 上数据交换的基础，是一种 client-server 协议，也就是说请求通常是由像浏览器这样的接受方发起的。一个完整的 web文档是由不同的子文档重新组建而成的，像是文本、布局描述、图片、视频、脚本等等。

**怎样和服务器通信？**

1. HTTP遵循经典的客户端-服务端模型，客户端打开一个连接以发出请求，然后等待它收到服务器端响应。 HTTP是无状态协议，意味着服务器不会在两个请求之间保留任何数据（状态）。
2. 客户端和服务端通过交换各自的消息（与数据流正好相反）来进行交互。通常由像浏览器这样的客户端发出的消息叫做 requests，那么被服务端回应的消息就叫做 responses。

HTTP 被设计于上20世纪90年代初期，**是一种可扩展性的协议。它是应用层的协议**，虽然理论上它可以通过任何可靠的传输协议来发送，但是它还是通过 TCP，或者是 TLS－加密的TCP连接来发送。因为它很好的扩展性，时至今日它不仅被用来传输超文本文档，还用来传输图片、视频或者向服务器发送如 HTML 表单这样的信息。HTTP 还可以根据网页需求，来获取部分web文档的内容来更新网页。

## 二、HTTP的基本性质

总述：HTTP是简单的、可扩展、无状态的

### HTTP 是简单的

即便在HTTP/2中把HTTP消息封装到了frames中，HTTP大体上还是被设计成可读的而且简单的。HTTP的消息能够让人读懂且明白它的意思，还允许简单的测试，放低了门槛，更有利于新来者了解。

### HTTP 是可扩展的

在HTTP/1中就出现了, [HTTP headers](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers) 让协议扩展变得非常容易。只要服务端和客户端在新的headers上语义达成一致，新的功能就可以轻松地被加进来。

### HTTP 是无状态，有会话的

HTTP是无状态的：在同一个连接中，两个成功执行的请求之间是没有关系的。这就带来了一个问题，用户没办法在一个网站进行连续的交互，比如在一个电商网站里，用户把某个商品加入了购物车中，换了一个页面后再次添加商品，两次添加商品的请求没有联系，浏览器无法知道最终用户都选择了哪些商品。而用HTTP的头部扩展，**HTTP Cookies就可以解决这个问题（将在后面介绍）**。把Cookies添加到头部中，创建一个会话来让每次请求都能共享相同的上下文信息，相同的状态。**而HTTP的核心是无状态的，cookies的使用可以创建有状态的会话。**

## 三、HTTP能控制什么

多年以来，HTTP良好的扩展性控制着越来越多Web的功能。缓存和认证方式很早就可以由HTTP来控制了。另一方面，对同源同域的限制到2010年才有所改变。

下面就是可以用HTTP来控制的常见特性。

### 缓存

文档怎么缓存能够通过HTTP来控制。服务端能告诉代理和客户端什么需要被缓存，缓存多久，而客户端能够根据请求条件首部字段（如If-Modified-Since、If-Match等）来忽略存储的文档。

### 开放同源限制

为了防止网络窥听和其它的隐私泄漏，浏览器强制对Web网站做了分割限制。只有来自于相同来源的网页才能够获取网站的全部信息。这样的限制有时反而成了负担，HTTP可以通过修改头部来开放这样的限制，因此web文档可以是由不同域下的信息拼接成的（在某些情况下，这样做还有安全因素考虑在里面）。

### 认证

一些页面能够被保护起来，仅让特定的用户进行访问。基本的认证功能可以直接通过HTTP提供，使用Authenticate相似的头部就可以，或者用HTTP cookies来设定指定的会话。

### 代理和隧道

通常情况下，服务器和/或客户端是处于内网的，对其它（外网）隐藏其真实 IP 地址。因此 HTTP 请求就要通过代理越过这个网络屏障。但并非所有的代理都是 HTTP 代理。例如，SOCKS协议的代理就运作在更底层。一些像 ftp 其它的协议也能够被它们处理。

### Cookies

Cookies用一个服务端的状态连接起了每一个请求。这就创建了会话，虽然基本的HTTP是无状态协议。这很有用，不仅是因为能用到购物车这样的电商业务上，更是因为，它使得任何网站都能够配置页面展现的东西了。

## 四、HTTP 和 TCP 之间的关系







---

本文改编或摘自

* MDN：[https://developer.mozilla.org/zh-CN/docs/Web/HTTP](https://developer.mozilla.org/zh-CN/docs/Web/HTTP)
* 扫盲 HTTPS 和 SSL/TLS 协议\[1\]：背景知识、协议的需求、设计的难点：[https://program-think.blogspot.com/2014/11/https-ssl-tls-1.html](https://program-think.blogspot.com/2014/11/https-ssl-tls-1.html)



