# 第2节 闭包

## 一、概念

闭包的字面含义就是闭合，包起来，简单的来说，就是一个具有封闭功能与包裹功能的结构。所谓的闭包就是一个具有封闭的对外不公开的一种包裹的结构或空间。

函数就可以构成一个闭包。

闭包就是一个具有封闭与包裹功能的结构，是为了实现具有私有访问空间的函数的。函数可以构成闭包是因为函数内部定义的数据函数外部无法访问，即函数具有封闭性；函数可以封装代码即具有包裹性，**所以函数可以构成闭包**。

## 二、闭包有什么用

闭包不允许外部访问，要解决的问题就是让外部间接访问函数内部的数据。事实上，通过使用闭包，我们可以做很多事情。比如模拟面向对象的代码风格；更优雅，更简洁的表达出代码；在某些方面提升代码的执行效率。利用闭包可以实现如下需求：

1. 匿名自执行函数。一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，因此在执行完后很快就会被释放，关键是这种机制不会污染全局对象。
2. 缓存。闭包正是可以做到这一点，因为它不会释放外部的引用，从而函数内部的值可以得以保留。
3. 实现封装
4. 模拟面向对象的代码风格

## 三、闭包的基本模型

### 对象模式

函数内部定义个一个对象，对象中绑定多个函数（方法），返回对象，利用对象的方法访问函数内的数据

```js
function fun1(){
    var a = 0;
    var b = 'hello';
    return obj = {
        a: a,
        b: b
    }
}

fun1().a; // 0
fun1().b; // hello
```

### 函数模式

函数内部定义一个新函数，返回新函数，用新函数获得函数内的数据

```js
function func1(){
    var a = 0;
    var b = 'hello';
    function func2(){
        return a + b;
    }
    return func2();
}

func1(); // 0hello
```

### 沙箱模式

沙箱模式就是一个自调用函数，代码写到函数中一样会执行，但是不会与外界有任何的影响

```
var a = 0;
(function(){
    var b = 'hello';
    console.log(a + b);
})();

// 0hello
```

sdhashdjas

