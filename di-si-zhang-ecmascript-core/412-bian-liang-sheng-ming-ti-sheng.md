# 第12节 变量声明提升

如下代码输出的结果是？

```js
var num = 123;
function foo1(){
    console.log( num );    //undefined
    var num = 456;
   console.log( num );    //456
}
foo1();
```

Javascript代码执行分为两个大步：

* 预解析的过程
* 代码的执行过程

## 一、预解析与变量声明提升

程序在执行过程中，会先将代码读取到内存中检查，会将所有的声明在此进行标记，所谓的标记就是让JS解析器知道有这个名字，后面在使用名字的时候不会出现未定义的错误。这个标记过程就是提升。

**声明**

名字的声明，标识符声明（变量名声明）

* 名字的声明就是让解析器知道有这个名字
* 名字没有任何数据与之对应

函数的声明，函数声明包含两部分，函数声明与函数表达式有区别，函数声明是单独写在一个结构中，不存在任何语句，逻辑判断等结构中

```js
function f() {
function func() {// 函数声明
} 
if ( true ) {
    function func2 () {} //函数表达式
}
var f = function func3 () {}; //函数表达式
this.sayHello = function () {}; //函数表达式
var i= 1；
function func4 () {}    // 函数声明
    var j = 2;
}
```

首先函数声明告诉解析器有这个名字存在，该阶段与名字声明一样

告诉解析器，这个名字对应的函数体是什么

```js
var num = 1;
function num () {
    alert( num );
}
num();    // 报错
```

**分析**

* 预解析代码，提示名字
  * 首先提升名字num
  * 再提升函数名，但是名字已经存在，因此只做第二部，让名字与函数体对应上
  * 结论就是 代码中已经有一个函数 num 了

* 开始执行代码，第一句话从赋值语句开始执行
  * 给num赋值为1
  * 覆盖了函数
* 调用num，由于num中存储的是数组1，因此报错



